\subsection{Measurement}
Martin Fowler unterscheidet in seinem Werk \refLibLiteratur{fowler1997analysis} zwischen qualitativen und quantitativen Messungen. 
Wird beispielsweise die Blutgruppen (A, B, AB und 0) eines Menschen typisiert, so handelt es sich um eine qualitative Messung. 
Im Kontext dieses Projekts wird diese Art von Messung als \term{Observation} (siehe Abschnitt \ref{Operation:Associationen}) bezeichnet. 
Unter quantitativen Messungen, bezeichnet als \term{Measurement}, wird beispielsweise das Feststellen der Körpergröße eines Menschen verstanden.
Measurements (beispielsweise Körpergröße von Hugo Egon Balder: 190cm) werden in Form von Quantitäten bzw. \term{Quantities} auf Konten (Accounts) erfasst.
Des Weiteren gibt es \term{MeasurementTypes} und \term{AccountTypes}, welche in diesem Abschnitt noch genauer erläutert werden.

\TODO[Alex: noch Ergänzungen? Bzw. 'ne bessere Überleitung zum folgenden Absatz?]

Auf der Modellebene befinden sich im Bereich \term{Measurement} zunächst drei Klassen: \term{MeasurementType}, \term{AccountType}
und deren gemeinsame Oberklasse \term{QuantifiedObjectType}. Auf der Exemplarebene finden sich deren Pendants als \term{Measurement},
\term{Account} und \term{QuantifiedObject}.

Die Operation \term{aggregate} des \term{QuantifiedObjects} fordert zudem eine sogenannte \term{AggregationStrategy},
die in vier Unterklassen konkret ausgeprägt werden kann.
Zusätzlich existieren drei Manager: der \term{MeasurementTypeManager}, der \term{AccountTypeManager} und der \term{AccountManager}.
Diese Klassen werden im Folgenden nach Themengebieten beschrieben.


\subsubsection{QuantifiedObject}

\TODO[Kapitel schreiben]

-- Attribute: MObject object

-- Nur Operation aggregate


\subsubsection{QuantifiedObjectType}

\TODO[Kapitel schreiben]

-- Attribute: MType type, AbsUnitType unitType

-- Keine Operationen


\subsubsection{Account}
Ein Konto (Account) gehört zu einem bestimmten Objekt (Object) und beinhaltet Einträge (entries) in Form von quantitativen Messungen (Measurements). 
Jedes Konto ist in einem Typ (AccountType) klassifiziert und kann außerdem mehrere Unterkonten (Komposition von subAccounts) besitzen.
Auf einem Konto kann auf Basis einer definierten Strategie (AggregationStrategy) aggregiert werden. 
Beispielsweise kann so Summe, Durchschnitt, Maximum oder Minimum der Einträge errechnet werden. 

Im Metamodell besitzt ein Account die folgenden Assoziationen.
\begin{description}
	\item[MAccountType type] Typ des Accounts.
	\item[Account** subAccounts hierarchy AccountHierarchy] Liste von Unterkonten.
	\item[Measurement** entries] Liste von Einträgen.
	\item[MObject object] Von QuantifiedObject geerbt.
\end{description}

Hinzu kommen die folgenden Operationen, welche zum Befüllen der o.g. Listen dienen.
\begin{description}
	\item[addEntry] Fügt einen neues Measurement in die entries-Liste hinzu. Das Element muss vom selben Typ sein wie die anderen Einträge der Liste (Konsistenzbedingungen folgen weiter unten).  
	\item[addSubAccount] Fügt einem Konto ein neues Unterkonto hinzu. Hierbei muss der Typ des neuen Unterkontos $\leq$ dem Typ des Hauptkontos sein (Konsistenzbedingungen folgen weiter unten).
\end{description}


\subsubsection{AccountType}
Der Typ eines Accounts (AccountType) dient zur Klassifizieren eines Kontos. Beispielsweise kann ein Konto als Bankkonto klassifiziert werden. Untertyp (SubAccountType) kann an dieser Stelle z.B. ein Giro- oder Kreditkartenkonto sein.
Sobald ein AccountType Exemplare besitzt, kann dieser nicht mehr gelöscht werden (siehe folgender Abschnitt). Um Hierarchien dieser Art abbilden zu können sind die folgenden Assoziationen und Operationen notwendig. 

Im Metamodell besitzt ein AccountType (neben der vom \term{QuantifiedObjectType} geerbten) die folgende Assoziation.
\begin{description}
	\item[MAccountType** subAccountTypes hierarchy MAccountTypeHierarchy] Diese Liste verbindet AccountTypes in Form einer Hierachie. Besonders bei dem Hinzufügen von SubAccounts ist diese Hierarchie relevant (dazu mehr im folgenden Abschnitt).
\end{description}

Hinzu kommt die folgende Operation, welche zum Befüllen der o.g. Liste dient.
\begin{description}
	\item[addSubAccountType] Fügt einen neuen AccountType der subAccountTypes Liste eines AccountTypes hinzu.
\end{description}


\subsubsection{Account \& AccountType}
Wie bereits beschrieben, ist ein Account in einem AccountType klassifiziert. Dieser Typ ist unter anderem relevant, wenn dem Konto ein neues Unterkonto hinzugefügt werden soll.  
In Abbildung \refImg{Measurement:AccTypeHier} wird eine AccountType Hierarchie dargestellt. \term{A} ist in diesem Beispiel der oberste AccountType, welcher die darunterliegenden SubAccountTypes referenziert. 
Auf \term{F} wird von keinem AccountType referenziert und refernziert auch selbst keine anderen AccountTypes.  

\img[width=\relWidth{0.4}]{measurement/AccountTypeHierarchy.png}{AccountType Hierarchie}{Measurement:AccTypeHier}

Nun sollen Exemplare (also Accounts) erstellt werden, welche SubAccounts enthalten. In Abbildung \refImg{Measurement:SubAccounts} können die im Folgenden beschriebenen Fälle nachvollzogen werden.
Der Einfachheit halber wird mit \term{K1:A} ein Account \term{K1} mit AccountType \term{A} bezeichnet. Da $C \leq A$ ist, darf \term{K2} als SubAccount zu \term{K1} hinzugefügt werden.
In den anderen drei Fällen ist der AccountType vom SubAccount entweder nicht $\leq$ dem Typen des Hauptkontos (Beispiel 2 und 4, von links) oder aber der AccountType ist in einer anderen Hierarchie (Beispiel 3, von links).

\img[width=\relWidth{0.5}]{measurement/SubAccounts.png}{SubAccount Exemplare}{Measurement:SubAccounts}

Daraus ergibt sich die folgende Konsistenzbedingung, welche bei Nichteinhaltung zu einer \term{ConsistencyException} führt.
\begin{equation} \forall \, a \in Account: \forall s \in a.subaccounts: s.type \leq a.type
\end{equation}




\subsubsection{AccountManager}
Der AccountManager dient zur Erstellung von Accounts und beinhaltet alle Accounts des Modells.

Im Metamodell besitzt der AccountManager die folgende Assoziation.
\begin{description}
	\item[Account** accounts] Diese Liste beinhaltet alle Accounts des Modells.
\end{description}

Hinzu kommt die folgende Operation, welche zum Befüllen der o.g. Liste dient.
\begin{description}
	\item[createAccount] Dient zum Erstellen von Accounts. Es wird ein Name, ein \term{MAccountType} sowie ein \term{MObject} übergeben, auf welches sich das Konto bezieht.
\end{description}

Neben den Accounts werden auch die \term{AccountTypes} zentral verwaltet. Dazu dient der \term{AccountTypeManager}.


\subsubsection{AccountTypeManager}
Der AccountTypeManager dient zur Erstellung von \term{AccountTypes} und beinhaltet alle \term{AccountTypes} des Modells.

Im Metamodell besitzt der \term{AccountTypeManager} die folgende Assoziation.
\begin{description}
	\item[MAccountType** accountTypes] Beschreiben
\end{description}

Hinzu kommt die folgende Operation, welche zum Befüllen der o.g. Liste dient.
\begin{description}
	\item[createAccountType] Dient zum Erstellen von \term{AccountTypes}. Es wird ein Name, ein \term{MType} und ein \term{UnitType} übergeben.
\end{description}
\TODO[Alex: Brauchen wir hier noch eine Konsistenzbedingung bzgl. Account-AccountType-UnitType = Account.entries-Measurement.Quantity-Type???]

Wie bereits beschrieben werden in Accounts Messungen in Form von Measurements erfasst. 
Im folgenden Abschnitt wird auf die Assoziationen und Operationen von Measurements genauer eingegangen.
\TODO[Überleitung via account.entries - passt so?]


\subsubsection{Measurement}

\TODO[Kapitel schreiben]

-- Attribute: MMeasurementType type, AbsQuantity quantity

-- Keine Operationen


\subsubsection{MeasurementType}

\TODO[Kapitel schreiben]

-- Keine Attribute

-- Keine Operationen


\subsubsection{Measurement \& MeasurementType}

\TODO[Alex: passt das? Oder denk ich da falsch herum?]
\begin{equation} \forall \, m_1, m_2 \in Account.entries: m_1.type = m_2.type
\end{equation}


\subsubsection{MeasurementTypeManager}

\TODO[Kapitel schreiben]

-- Attribute: MMeasurementType** measurementTypes

-- Operationen:

\begin{description}
	\item[createMeasurementType] Beschreiben
\end{description}


\subsubsection{AggregationStrategy}

\TODO[Kapitel schreiben]

-- Keine Attribute

-- Nur Operation aggregateMeasurements


\subsubsection{Löschen im Bereich Measurement}

\TODO[Kapitel schreiben]

-- Was ist löschbar?
-- Was nicht? Warum?